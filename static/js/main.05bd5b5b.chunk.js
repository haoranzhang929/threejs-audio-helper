(this["webpackJsonpthreejs-audio-helper"]=this["webpackJsonpthreejs-audio-helper"]||[]).push([[0],{126:function(e,t,a){},223:function(e,t,a){e.exports=a(360)},360:function(e,t,a){"use strict";a.r(t);var n,l,r,o,c,i,u=a(1),s=a.n(u),m=a(173),d=a.n(m),f=(a(126),a(187)),g=a(11),E=a(62),b=a(174),p=a.n(b),h=a(175),v=function(e){var t=e.data;return s.a.createElement(h.a,{data:t,margin:{top:20,right:80,bottom:20,left:60},xScale:{type:"linear",min:0,max:"auto"},yScale:{type:"linear",min:0,max:260},curve:"catmullRom",axisTop:null,axisRight:null,axisBottom:null,axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"level",legendOffset:-40,legendPosition:"middle"},colors:"hsl(207.9,79.2%,28.2%)",enablePoints:!1,useMesh:!0,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]})},y=function(){var e=Object(u.useRef)(!1),t=Object(u.useRef)(!1),a=Object(u.useRef)(null),m=Object(u.useRef)(null),d=Object(u.useState)(),b=Object(g.a)(d,2),h=b[0],y=b[1],j=Object(u.useState)(),O=Object(g.a)(j,2),S=O[0],w=O[1],k=Object(u.useState)(),N=Object(g.a)(k,2),B=N[0],F=N[1],R=Object(u.useState)(),x=Object(g.a)(R,2),D=x[0],q=x[1],A=Object(u.useState)("Blue Boi.mp3"),C=Object(g.a)(A,2),L=C[0],P=C[1],z=Object(u.useState)(!1),I=Object(g.a)(z,2),M=I[0],W=I[1];Object(u.useEffect)((function(){"number"===typeof B&&h&&w(h[B])}),[B]);var H=function a(){n=window.requestAnimationFrame(a);var l=c&&c.getFrequencyData();if(e.current&&!t.current&&l.forEach((function(e,t){var a=i.get(t);void 0===a?i.set(t,[e]):i.set(t,[].concat(Object(f.a)(a),[e]))})),o.buffer&&!o.isPlaying&&!t.current){console.log("Ended"),t.current=!0,e.current=!1;var r=Array.from(i).map((function(e){var t,a,n=Object(g.a)(e,2),l=n[0],r=n[1];return t=l.toString(),a=r.map((function(e,t){return{x:t,y:e}})),{id:t,data:a}}));y(r),w(r[0]),F(0),m.current&&m.current.focus(),W(!1),n&&cancelAnimationFrame(n),n=null}},T=function(){i=new Map,l=new E.d,r=new E.c,o=new E.a(r),c=new E.b(o,1024),l.load(D||"".concat("/threejs-audio-helper","/BlueBoi.mp3"),(function(a){o&&(o.setBuffer(a),o.play(),o.setVolume(1),e.current=!0,t.current=!1)}),(function(e){var t=e.loaded/e.total*100;console.info("Audio Loading: ".concat(Math.floor(t),"%")),100===t&&console.log("Loading Complete")})),w(void 0),n||(n=requestAnimationFrame(H))},U=Object(u.useCallback)(p()((function(e){return F(e)}),100),[]);return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"configs"},s.a.createElement("div",{className:"load-file"},s.a.createElement("input",{id:"audio-file",type:"file",ref:a,accept:"audio/*",onChange:function(){var e;(null===(e=a.current)||void 0===e?void 0:e.files)&&(P(a.current.files[0].name),q(URL.createObjectURL(a.current.files[0])))}}),s.a.createElement("label",{htmlFor:"audio-file"},"Browse local file"),s.a.createElement("small",null,L)),s.a.createElement("div",{className:"start"},s.a.createElement("button",{onClick:function(){!e.current&&T(),W(!0)},className:"start-btn"},"Start"),s.a.createElement("button",{onClick:function(){e.current&&o.stop(),W(!1)},className:"stop-btn"},"Stop"))),!h&&!e.current&&s.a.createElement("div",{className:"instruction"},s.a.createElement("small",null,"This is a helper site for visualizing ByteFrequencyData from",s.a.createElement("strong",null," THREE.AudioAnalyser.getFrequencyData()")),M?s.a.createElement("div",{className:"lds-facebook"},s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null)):s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement("small",null,"1. ",s.a.createElement("strong",null,"Load")," audio file to visualize (sample music provided if you just want to try it out)"),s.a.createElement("small",null,"2. Once selected, Click ",s.a.createElement("strong",null,"Start")," to play & analyse audio"),s.a.createElement("small",null,"3. Wait for audio to finish or click ",s.a.createElement("strong",null,"Stop")," to display line chart and frequency data slider"),s.a.createElement("small",null,"4. Use ",s.a.createElement("strong",null,"Slider")," to select No. of frequency data you want (Default is 0)"),s.a.createElement("br",null),s.a.createElement("small",null,"Note: ",s.a.createElement("strong",null,"Pause")," or ",s.a.createElement("strong",null,"Duration control")," functionalities are not implemented"),s.a.createElement("small",{className:"music-credit"},"Sample Music by LAKEY INSPIRED -"," ",s.a.createElement("a",{href:"https://soundcloud.com/lakeyinspired/blue-boi",rel:"noopener noreferrer",target:"_blank"},"Blue Boi")))),s.a.createElement("div",{className:"control"},h&&s.a.createElement(s.a.Fragment,null,s.a.createElement("input",{id:"fft-slider",className:"ranger",type:"range",min:"0",max:h.length-1,step:"1",onChange:function(e){return U(parseInt(e.target.value))},defaultValue:0,ref:m}),s.a.createElement("label",{htmlFor:"fft-slider"},s.a.createElement("small",null,"No.",B," of ",h.length-1," Frequency Data")))),s.a.createElement("div",{className:"chart"},S&&s.a.createElement(v,{data:[S]})),s.a.createElement("footer",null,s.a.createElement("div",null,"\xa9 ",(new Date).getFullYear()," ",s.a.createElement("a",{href:"https://haoranzhang.me/",rel:"noopener noreferrer",target:"_blank"},"Haoran Zhang"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(s.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[223,1,2]]]);
//# sourceMappingURL=main.05bd5b5b.chunk.js.map